var u=Object.defineProperty;var g=(r,t,s)=>t in r?u(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s;var l=(r,t,s)=>(g(r,typeof t!="symbol"?t+"":t,s),s);import{S as f,b as a,a as w,j as i,T as m,P as b}from"./index-61d66076.js";class o{constructor(t){this.props=t}get title(){return this.props.title??this.props.field}get field(){return this.props.field}}class _{constructor(t,s,e=10){l(this,"ds");l(this,"Header",t=>this.columns.map(s=>a(t.children,[s])));l(this,"Row",t=>w({source:this.ds.prop("data"),children:t.children}));l(this,"Cell",t=>this.columns.map(s=>a(t.children,[s])));l(this,"updateWindow",x((t,s)=>{const{windowSize:e}=this,n=t/s,d=n-n%e;return this.ds.update(c=>{if(c.offset===d)return c;{const p=Math.min(d,c.length-1);return this.load(p,e*2)}})}));this.load=t,this.columns=s,this.windowSize=e,this.ds=new f(t(0,e*2))}view(){return this.ds.effect(t=>{console.log(t)})}}function x(r,t=10){let s=0;return function(...e){const n=Date.now();return s=n,new Promise(d=>{setTimeout(()=>{s===n&&d(r(...e))},t)})}}const y="_grid_1l73l_2",T={grid:y,"grid-header":"_grid-header_1l73l_11","grid-row":"_grid-row_1l73l_22"},h=5e4;function H(r,t){const s=[];for(let e=r;e<h&&e<t+r;e++)s.push({firstName:"p-"+e,lastName:"s",age:e%30+20,visits:e%10+5,status:"Married",progress:e});return{data:s,offset:r,length:h}}function C(){const r=new _(H,[new o({field:"firstName"}),new o({field:"lastName"}),new o({field:"age"}),new o({field:"status"})],20),t=40,s=48;return i(b,{children:[i(m,{children:"Grid"}),i("div",{class:"border-0 p-0 h-full overflow-auto",scroll:e=>r.updateWindow(e.currentTarget.scrollTop,t),children:i("table",{class:"block",style:r.ds.map(e=>`height: ${e.length*t+s}px;`),children:[i("thead",{class:"sticky top-0 bg-white",children:i("tr",{children:[i("td",{}),i(r.Header,{children:e=>i("td",{class:"px-2",children:e.title})}),i("td",{})]})}),i("tbody",{children:[i("tr",{children:i("td",{class:"p-0",colSpan:5,style:r.ds.map(e=>`padding-top: ${e.offset*t}px`)})}),i(r.Row,{children:e=>i("tr",{class:T["grid-row"],children:[i("td",{class:"px-3 bg-white",children:">"}),i(r.Cell,{children:n=>i("td",{class:"px-2",children:e.prop(n.field)})}),i("td",{children:i("button",{class:"px-2",children:"Ã—"})})]})})]})]})})]})}export{C as App};
